{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.208.0"},"children":{"SentimentNotesStack":{"id":"SentimentNotesStack","path":"SentimentNotesStack","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.208.0"},"children":{"NotesTable":{"id":"NotesTable","path":"SentimentNotesStack/NotesTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.208.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentNotesStack/NotesTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"id","attributeType":"S"},{"attributeName":"dateCreated","attributeType":"S"},{"attributeName":"sentiment","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","deletionProtectionEnabled":false,"globalSecondaryIndexes":[{"indexName":"SentimentIndex","keySchema":[{"attributeName":"sentiment","keyType":"HASH"},{"attributeName":"dateCreated","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"id","keyType":"HASH"},{"attributeName":"dateCreated","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":false},"tableName":"sentiment-notes"}}},"ScalingRole":{"id":"ScalingRole","path":"SentimentNotesStack/NotesTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.208.0","metadata":[]}}}},"NotesApi":{"id":"NotesApi","path":"SentimentNotesStack/NotesApi","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.GraphqlApi","version":"2.208.0","metadata":[]},"children":{"ApiLogsRole":{"id":"ApiLogsRole","path":"SentimentNotesStack/NotesApi/ApiLogsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.208.0","metadata":[]},"children":{"ImportApiLogsRole":{"id":"ImportApiLogsRole","path":"SentimentNotesStack/NotesApi/ApiLogsRole/ImportApiLogsRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.208.0","metadata":[]}},"Resource":{"id":"Resource","path":"SentimentNotesStack/NotesApi/ApiLogsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSAppSyncPushToCloudWatchLogs"]]}]}}}}},"Resource":{"id":"Resource","path":"SentimentNotesStack/NotesApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLApi","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLApi","aws:cdk:cloudformation:props":{"authenticationType":"API_KEY","logConfig":{"cloudWatchLogsRoleArn":{"Fn::GetAtt":["NotesApiApiLogsRole339FF118","Arn"]},"fieldLogLevel":"ALL"},"name":"sentiment-notes-api","xrayEnabled":true}}},"Schema":{"id":"Schema","path":"SentimentNotesStack/NotesApi/Schema","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnGraphQLSchema","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::GraphQLSchema","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["NotesApi2FFCBC92","ApiId"]},"definition":"enum Sentiment {\n   happy\n   sad\n   neutral\n   angry\n}\n\ntype Note {\n   id: ID!\n   text: String!\n   sentiment: Sentiment!\n   dateCreated: AWSDateTime!\n}\n\ntype NoteQueryResults {\n   items: [Note]\n   nextToken: String\n   scannedCount: Int\n}\n\ntype Query {\n   getNotes(\n      sentiment: Sentiment\n      limit: Int\n      nextToken: String\n   ): NoteQueryResults\n}\n\ntype Mutation {\n   createNote(text: String!, sentiment: Sentiment!): Note\n}\n\ntype Subscription {\n   onCreateNote: Note @aws_subscribe(mutations: [\"createNote\"])\n}\n\nschema {\n   query: Query\n   mutation: Mutation\n   subscription: Subscription\n}\n"}}},"sentiment-notes-api-keyApiKey":{"id":"sentiment-notes-api-keyApiKey","path":"SentimentNotesStack/NotesApi/sentiment-notes-api-keyApiKey","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnApiKey","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::ApiKey","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["NotesApi2FFCBC92","ApiId"]},"description":"API Key for Sentiment Notes App","expires":1786140304}}},"LogRetention":{"id":"LogRetention","path":"SentimentNotesStack/NotesApi/LogRetention","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogRetention","version":"2.208.0"},"children":{"Resource":{"id":"Resource","path":"SentimentNotesStack/NotesApi/LogRetention/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.208.0"}}}},"LogGroup":{"id":"LogGroup","path":"SentimentNotesStack/NotesApi/LogGroup","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.208.0","metadata":[]}},"NotesDataSource":{"id":"NotesDataSource","path":"SentimentNotesStack/NotesApi/NotesDataSource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.DynamoDbDataSource","version":"2.208.0"},"children":{"ServiceRole":{"id":"ServiceRole","path":"SentimentNotesStack/NotesApi/NotesDataSource/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.208.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"SentimentNotesStack/NotesApi/NotesDataSource/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.208.0","metadata":[]}},"Resource":{"id":"Resource","path":"SentimentNotesStack/NotesApi/NotesDataSource/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"appsync.amazonaws.com"}}],"Version":"2012-10-17"}}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SentimentNotesStack/NotesApi/NotesDataSource/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.208.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentNotesStack/NotesApi/NotesDataSource/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:GetItem","dynamodb:Scan","dynamodb:ConditionCheckItem","dynamodb:BatchWriteItem","dynamodb:PutItem","dynamodb:UpdateItem","dynamodb:DeleteItem","dynamodb:DescribeTable"],"Effect":"Allow","Resource":[{"Fn::GetAtt":["NotesTableD0D0D2F1","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["NotesTableD0D0D2F1","Arn"]},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"NotesApiNotesDataSourceServiceRoleDefaultPolicy598E9B8C","roles":[{"Ref":"NotesApiNotesDataSourceServiceRole773EA900"}]}}}}}}},"Resource":{"id":"Resource","path":"SentimentNotesStack/NotesApi/NotesDataSource/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnDataSource","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::DataSource","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["NotesApi2FFCBC92","ApiId"]},"dynamoDbConfig":{"tableName":{"Ref":"NotesTableD0D0D2F1"},"awsRegion":{"Ref":"AWS::Region"}},"name":"NotesDataSource","serviceRoleArn":{"Fn::GetAtt":["NotesApiNotesDataSourceServiceRole773EA900","Arn"]},"type":"AMAZON_DYNAMODB"}}}}}}},"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a":{"id":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","path":"SentimentNotesStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Code":{"id":"Code","path":"SentimentNotesStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.208.0"},"children":{"Stage":{"id":"Stage","path":"SentimentNotesStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.208.0"}},"AssetBucket":{"id":"AssetBucket","path":"SentimentNotesStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.208.0","metadata":[]}}}},"ServiceRole":{"id":"ServiceRole","path":"SentimentNotesStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.208.0","metadata":[]},"children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"SentimentNotesStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.208.0","metadata":[]}},"Resource":{"id":"Resource","path":"SentimentNotesStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"SentimentNotesStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.208.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"SentimentNotesStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/ServiceRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["logs:PutRetentionPolicy","logs:DeleteRetentionPolicy"],"Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"},"policyName":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRoleDefaultPolicyADDA7DEB","roles":[{"Ref":"LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8aServiceRole9741ECFB"}]}}}}}}},"Resource":{"id":"Resource","path":"SentimentNotesStack/LogRetentionaae0aa3c5b4d4f87b02d85b201efdd8a/Resource","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.208.0"}}}},"LatestNodeRuntimeMap":{"id":"LatestNodeRuntimeMap","path":"SentimentNotesStack/LatestNodeRuntimeMap","constructInfo":{"fqn":"aws-cdk-lib.CfnMapping","version":"2.208.0"}},"GetNotesFunction":{"id":"GetNotesFunction","path":"SentimentNotesStack/GetNotesFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.AppsyncFunction","version":"2.208.0","metadata":[]},"children":{"Code":{"id":"Code","path":"SentimentNotesStack/GetNotesFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.208.0"},"children":{"Stage":{"id":"Stage","path":"SentimentNotesStack/GetNotesFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.208.0"}},"AssetBucket":{"id":"AssetBucket","path":"SentimentNotesStack/GetNotesFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.208.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SentimentNotesStack/GetNotesFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnFunctionConfiguration","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::FunctionConfiguration","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["NotesApi2FFCBC92","ApiId"]},"codeS3Location":{"Fn::Sub":"s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/0d7ad78905699e57153904b26eb85aa9e9b38aeec278ab715d054b4e7d7e75cf.js"},"dataSourceName":"NotesDataSource","functionVersion":"2018-05-29","name":"getNotes","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"}}}}}},"GetNotesResolver":{"id":"GetNotesResolver","path":"SentimentNotesStack/GetNotesResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.208.0"},"children":{"Code":{"id":"Code","path":"SentimentNotesStack/GetNotesResolver/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.208.0"},"children":{"Stage":{"id":"Stage","path":"SentimentNotesStack/GetNotesResolver/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.208.0"}},"AssetBucket":{"id":"AssetBucket","path":"SentimentNotesStack/GetNotesResolver/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.208.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SentimentNotesStack/GetNotesResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["NotesApi2FFCBC92","ApiId"]},"codeS3Location":{"Fn::Sub":"s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/e5a755fd21ba78a91cad8d487eb20835822b591774110c7f09d39e862f003691.js"},"fieldName":"getNotes","kind":"PIPELINE","pipelineConfig":{"functions":[{"Fn::GetAtt":["GetNotesFunction7AC55A7E","FunctionId"]}]},"runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Query"}}}}},"CreateNoteFunction":{"id":"CreateNoteFunction","path":"SentimentNotesStack/CreateNoteFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.AppsyncFunction","version":"2.208.0","metadata":[]},"children":{"Code":{"id":"Code","path":"SentimentNotesStack/CreateNoteFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.208.0"},"children":{"Stage":{"id":"Stage","path":"SentimentNotesStack/CreateNoteFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.208.0"}},"AssetBucket":{"id":"AssetBucket","path":"SentimentNotesStack/CreateNoteFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.208.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SentimentNotesStack/CreateNoteFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnFunctionConfiguration","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::FunctionConfiguration","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["NotesApi2FFCBC92","ApiId"]},"codeS3Location":{"Fn::Sub":"s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/98c226a46007ddcb2c5f09adbd5d8d38f773bb4e034ddf9f9f1e44e7c89f2e91.js"},"dataSourceName":"NotesDataSource","functionVersion":"2018-05-29","name":"createNote","runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"}}}}}},"CreateNoteResolver":{"id":"CreateNoteResolver","path":"SentimentNotesStack/CreateNoteResolver","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.Resolver","version":"2.208.0"},"children":{"Code":{"id":"Code","path":"SentimentNotesStack/CreateNoteResolver/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.208.0"},"children":{"Stage":{"id":"Stage","path":"SentimentNotesStack/CreateNoteResolver/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.208.0"}},"AssetBucket":{"id":"AssetBucket","path":"SentimentNotesStack/CreateNoteResolver/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.208.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"SentimentNotesStack/CreateNoteResolver/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_appsync.CfnResolver","version":"2.208.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::AppSync::Resolver","aws:cdk:cloudformation:props":{"apiId":{"Fn::GetAtt":["NotesApi2FFCBC92","ApiId"]},"codeS3Location":{"Fn::Sub":"s3://cdk-hnb659fds-assets-${AWS::AccountId}-${AWS::Region}/e5a755fd21ba78a91cad8d487eb20835822b591774110c7f09d39e862f003691.js"},"fieldName":"createNote","kind":"PIPELINE","pipelineConfig":{"functions":[{"Fn::GetAtt":["CreateNoteFunctionC1EC69E3","FunctionId"]}]},"runtime":{"name":"APPSYNC_JS","runtimeVersion":"1.0.0"},"typeName":"Mutation"}}}}},"GraphQLApiUrl":{"id":"GraphQLApiUrl","path":"SentimentNotesStack/GraphQLApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.208.0"}},"GraphQLApiKey":{"id":"GraphQLApiKey","path":"SentimentNotesStack/GraphQLApiKey","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.208.0"}},"Region":{"id":"Region","path":"SentimentNotesStack/Region","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.208.0"}},"DynamoDbTableName":{"id":"DynamoDbTableName","path":"SentimentNotesStack/DynamoDbTableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.208.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"SentimentNotesStack/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"},"children":{"Default":{"id":"Default","path":"SentimentNotesStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.208.0"}},"Condition":{"id":"Condition","path":"SentimentNotesStack/CDKMetadata/Condition","constructInfo":{"fqn":"aws-cdk-lib.CfnCondition","version":"2.208.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"SentimentNotesStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.208.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"SentimentNotesStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.208.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.2"}}}}}